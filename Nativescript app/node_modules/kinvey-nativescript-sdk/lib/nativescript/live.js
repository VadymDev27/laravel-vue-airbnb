Object.defineProperty(exports, "__esModule", { value: true });
var application = __importStar(require("tns-core-modules/application"));
var connectivityModule = __importStar(require("tns-core-modules/connectivity"));
var live = __importStar(require("kinvey-js-sdk/lib/live"));
var currentConnectionType = connectivityModule.getConnectionType();
function startMonitoring() {
    // Reconnect live service on the application resume event
    application.off(application.resumeEvent);
    application.on(application.resumeEvent, function () {
        if (application.ios) {
            live.reconnect();
        }
    });
    // Monitor network connectivity and reconnect live service when necessary
    connectivityModule.stopMonitoring();
    connectivityModule.startMonitoring(function (newConnectionType) {
        if (currentConnectionType === connectivityModule.connectionType.none && (newConnectionType === connectivityModule.connectionType.wifi || newConnectionType === connectivityModule.connectionType.mobile)) {
            live.reconnect();
        }
        currentConnectionType = newConnectionType;
    });
}
exports.startMonitoring = startMonitoring;
function stopMonitoring() {
    application.off(application.resumeEvent);
    connectivityModule.stopMonitoring();
}
exports.stopMonitoring = stopMonitoring;
//# sourceMappingURL=live.js.map